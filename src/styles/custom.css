/* --- 1. CONFIGURACIÓN DE LAYOUT (ANCHO DE PÁGINA) --- */
:root {
    /* Balance ideal para lectura y diagramas */
    --sl-content-width: 56rem;
}

@media (min-width: 72rem) {
    :root {
        /* Aprovechamiento de pantallas grandes para arquitectura técnica */
        --sl-content-width: 85rem;
    }
}

/* --- 2. SELECTOR DE TEMA (CORRECCIÓN DE ICONOS Y CLIC) --- */
starlight-theme-select {
    position: relative;
    display: flex;
    align-items: center;
}

starlight-theme-select label {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
}

starlight-theme-select select {
    /* Colores aprobados para contraste óptimo */
    background-color: var(--sl-color-gray-6) !important;
    border: 1px solid var(--sl-color-gray-4) !important;
    color: var(--sl-color-white) !important;

    /* Espaciado simétrico para evitar solapamiento con iconos (izq y der) */
    padding: 0.25rem 2.2rem 0.25rem 2.2rem !important;

    border-radius: 0.4rem;
    cursor: pointer;
    min-width: 8.5rem;
    font-size: var(--sl-text-sm) !important;
    line-height: 1.5;

    /* Reseteo de estilos nativos para control total */
    appearance: none;
    -webkit-appearance: none;
    z-index: 1;
}

/* Posicionamiento del Icono Izquierdo (Sol/Luna) */
starlight-theme-select svg:first-of-type {
    position: absolute !important;
    left: 0.75rem !important;
    pointer-events: none !important;
    /* Permite clickear el select debajo */
    z-index: 2;
}

/* Posicionamiento del Icono Derecho (Flecha de despliegue) */
starlight-theme-select svg:last-of-type {
    position: absolute !important;
    right: 0.75rem !important;
    pointer-events: none !important;
    /* Permite clickear el select debajo */
    z-index: 2;
}

starlight-theme-select select:hover {
    border-color: var(--sl-color-accent-high) !important;
    background-color: var(--sl-color-gray-5) !important;
}

/* --- 3. OPTIMIZACIÓN DE DIAGRAMAS MERMAID --- */
.mermaid-diagram-container {
    display: flex;
    justify-content: center;
    background-color: #0f1117;
    /* Fondo tipo terminal/editor profesional */
    padding: 2.5rem;
    border-radius: 0.75rem;
    margin: 2rem 0;
    border: 1px solid var(--sl-color-gray-5);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    overflow-x: auto;
}

/* Ajuste de SVG para fluidez */
.mermaid-diagram-container svg {
    max-width: 100% !important;
    height: auto !important;
}

/* Estilización de Nodos y Conectores (Modo Ingeniería) */
.mermaid-diagram-container .node rect,
.mermaid-diagram-container .node circle,
.mermaid-diagram-container .node polygon {
    fill: #1e293b !important;
    /* Azul pizarra oscuro */
    stroke: var(--sl-color-accent-high) !important;
    /* Color de acento del sitio */
    stroke-width: 1.5px !important;
}

.mermaid-diagram-container .node .label {
    color: var(--sl-color-white) !important;
    font-weight: 500;
}

.mermaid-diagram-container .edgePath .path {
    stroke: var(--sl-color-gray-3) !important;
    stroke-width: 2px !important;
}

.mermaid-diagram-container .marker {
    fill: var(--sl-color-gray-3) !important;
}

/* --- 4. LIMPIEZA VISUAL (PRE-RENDER) --- */
/* Oculta el bloque de código original de Mermaid para evitar parpadeos visuales */
pre:has(code.language-mermaid) {
    display: none !important;
}